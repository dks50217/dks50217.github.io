import{b as J,k as U,d as Y,u as K,c as a,bB as ee,bC as te,bD as oe,X as se,bE as ne,b3 as ae,l as M,v as p,x as k,Z as h,F as t,G as r,T as g,r as W,S as H,a4 as le,R as N,Q as X,H as y,aC as re,aB as ie,n as ue,bF as de,s as me,o as fe,a as j,D as R,E as q,f as l,j as d,N as ce,O as pe,P as he}from"./index.js";import{E as ge}from"./el-row.js";import{g as we,E as ye}from"./actionChinese.js";import{E as ve}from"./el-input.js";import{E as Ce}from"./el-switch.js";import{E as ke}from"./el-input-number.js";import{_ as be}from"./_plugin-vue_export-helper.js";const Ve=J({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:v=>v>=0&&v<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:U(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:U([String,Array,Function]),default:""},format:{type:U(Function),default:v=>`${v}%`}}),_e=["aria-valuenow"],xe={viewBox:"0 0 100 100"},Se=["d","stroke","stroke-width"],$e=["d","stroke","opacity","stroke-linecap","stroke-width"],Te={key:0},Ae=Y({name:"ElProgress"}),ze=Y({...Ae,props:Ve,setup(v){const n=v,f={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},o=K("progress"),P=a(()=>({width:`${n.percentage}%`,animationDuration:`${n.duration}s`,backgroundColor:i(n.percentage)})),_=a(()=>(n.strokeWidth/n.width*100).toFixed(1)),A=a(()=>["circle","dashboard"].includes(n.type)?Number.parseInt(`${50-Number.parseFloat(_.value)/2}`,10):0),z=a(()=>{const e=A.value,u=n.type==="dashboard";return`
          M 50 50
          m 0 ${u?"":"-"}${e}
          a ${e} ${e} 0 1 1 0 ${u?"-":""}${e*2}
          a ${e} ${e} 0 1 1 0 ${u?"":"-"}${e*2}
          `}),C=a(()=>2*Math.PI*A.value),x=a(()=>n.type==="dashboard"?.75:1),E=a(()=>`${-1*C.value*(1-x.value)/2}px`),F=a(()=>({strokeDasharray:`${C.value*x.value}px, ${C.value}px`,strokeDashoffset:E.value})),b=a(()=>({strokeDasharray:`${C.value*x.value*(n.percentage/100)}px, ${C.value}px`,strokeDashoffset:E.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),V=a(()=>{let e;return n.color?e=i(n.percentage):e=f[n.status]||f.default,e}),S=a(()=>n.status==="warning"?ee:n.type==="line"?n.status==="success"?te:oe:n.status==="success"?se:ne),D=a(()=>n.type==="line"?12+n.strokeWidth*.4:n.width*.111111+2),$=a(()=>n.format(n.percentage));function I(e){const u=100/e.length;return e.map((m,w)=>M(m)?{color:m,percentage:(w+1)*u}:m).sort((m,w)=>m.percentage-w.percentage)}const i=e=>{var u;const{color:c}=n;if(ae(c))return c(e);if(M(c))return c;{const m=I(c);for(const w of m)if(w.percentage>e)return w.color;return(u=m[m.length-1])==null?void 0:u.color}};return(e,u)=>(p(),k("div",{class:h([t(o).b(),t(o).m(e.type),t(o).is(e.status),{[t(o).m("without-text")]:!e.showText,[t(o).m("text-inside")]:e.textInside}]),role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[e.type==="line"?(p(),k("div",{key:0,class:h(t(o).b("bar"))},[r("div",{class:h(t(o).be("bar","outer")),style:g({height:`${e.strokeWidth}px`})},[r("div",{class:h([t(o).be("bar","inner"),{[t(o).bem("bar","inner","indeterminate")]:e.indeterminate}]),style:g(t(P))},[(e.showText||e.$slots.default)&&e.textInside?(p(),k("div",{key:0,class:h(t(o).be("bar","innerText"))},[W(e.$slots,"default",{percentage:e.percentage},()=>[r("span",null,N(t($)),1)])],2)):H("v-if",!0)],6)],6)],2)):(p(),k("div",{key:1,class:h(t(o).b("circle")),style:g({height:`${e.width}px`,width:`${e.width}px`})},[(p(),k("svg",xe,[r("path",{class:h(t(o).be("circle","track")),d:t(z),stroke:`var(${t(o).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-width":t(_),fill:"none",style:g(t(F))},null,14,Se),r("path",{class:h(t(o).be("circle","path")),d:t(z),stroke:t(V),fill:"none",opacity:e.percentage?1:0,"stroke-linecap":e.strokeLinecap,"stroke-width":t(_),style:g(t(b))},null,14,$e)]))],6)),(e.showText||e.$slots.default)&&!e.textInside?(p(),k("div",{key:2,class:h(t(o).e("text")),style:g({fontSize:`${t(D)}px`})},[W(e.$slots,"default",{percentage:e.percentage},()=>[e.status?(p(),X(t(ie),{key:1},{default:y(()=>[(p(),X(re(t(S))))]),_:1})):(p(),k("span",Te,N(t($)),1))])],6)):H("v-if",!0)],10,_e))}});var Ee=le(ze,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const De=ue(Ee);const Ie={style:{width:"10rem"}},Ne=Y({__name:"castingToChinese",setup(v){var $,I;de(i=>({"45e2c12e":t(_),f046cb86:t(C),f046cb84:t(x),"2bf571f5":t(A),"5e0e51e2":t(z),"4188df52":t(E),"4188df50":t(F),"6022bcd3":t(P)}));class n{constructor(e){this.name=we(parseInt(e[4],16))??e[4],this.startTime=Date.now(),this.castTime=Number(e[8])*1e3,this.overTime=this.startTime+this.castTime,this.actionId=parseInt(e[4],16)}}const f=me({targetCast:void 0}),o=fe("castingToChinese",{width:303,showCountdown:!0,showProgress:!0,showActionChinese:!0,offsetCountdownX:0,offsetCountdownY:0,offsetActionChineseX:0,offsetActionChineseY:-4,ping:80,keep:100,fontSizeCountDown:17,fontSizeActionName:20,fontFamily:"SmartisanHei"},localStorage,{mergeDefaults:!0}),P=a(()=>o.value.width+"px"),_=a(()=>o.value.showCountdown?1:0),A=a(()=>o.value.showProgress?1:0),z=a(()=>o.value.showActionChinese?1:0),C=a(()=>o.value.offsetCountdownX+"px"),x=a(()=>o.value.offsetCountdownY+"px"),E=a(()=>o.value.offsetActionChineseX+"px"),F=a(()=>o.value.offsetActionChineseY+"px"),b=new Map,V=j(0),S=o.value.ping,D=j(((I=($=document.getElementById("unlocked"))==null?void 0:$.style)==null?void 0:I.display)==="flex");return addOverlayListener("EnmityTargetData",i=>{var e;f.targetCast=b.get((e=i.Target)==null?void 0:e.ID)}),addOverlayListener("LogLine",i=>{i.line[0]==="20"?b.set(parseInt(i.line[2],16),new n(i.line)):i.line[0]==="23"&&b.delete(parseInt(i.line[2],16))}),addOverlayListener("ChangeZone",()=>b.clear()),startOverlayEvents(),requestAnimationFrame(function i(){V.value=Date.now(),requestAnimationFrame(i)}),document.addEventListener("onOverlayStateUpdate",i=>{var e;D.value=((e=i==null?void 0:i.detail)==null?void 0:e.isLocked)===!1}),(i,e)=>{const u=ke,c=Ce,m=ve,w=ce,B=ye,L=ge,Z=De,G=pe,Q=he;return p(),X(Q,null,{default:y(()=>[R(l(w,{class:"settings"},{default:y(()=>[r("form",null,[d("寬度: "),l(u,{modelValue:t(o).width,"onUpdate:modelValue":e[0]||(e[0]=s=>t(o).width=s),min:20,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[d("顯示倒計時: "),l(c,{modelValue:t(o).showCountdown,"onUpdate:modelValue":e[1]||(e[1]=s=>t(o).showCountdown=s)},null,8,["modelValue"])]),r("form",null,[d("顯示進度條: "),l(c,{modelValue:t(o).showProgress,"onUpdate:modelValue":e[2]||(e[2]=s=>t(o).showProgress=s)},null,8,["modelValue"])]),r("form",null,[d("顯示中文: "),l(c,{modelValue:t(o).showActionChinese,"onUpdate:modelValue":e[3]||(e[3]=s=>t(o).showActionChinese=s)},null,8,["modelValue"])]),r("form",null,[d("延遲(ms): "),l(u,{modelValue:t(o).ping,"onUpdate:modelValue":e[4]||(e[4]=s=>t(o).ping=s),min:0,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[d("保留(ms): "),l(u,{modelValue:t(o).keep,"onUpdate:modelValue":e[5]||(e[5]=s=>t(o).keep=s),min:0,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[d("倒計時偏移X: "),l(u,{modelValue:t(o).offsetCountdownX,"onUpdate:modelValue":e[6]||(e[6]=s=>t(o).offsetCountdownX=s),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),r("form",null,[d("倒計時偏移Y: "),l(u,{modelValue:t(o).offsetCountdownY,"onUpdate:modelValue":e[7]||(e[7]=s=>t(o).offsetCountdownY=s),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[d("中文偏移X: "),l(u,{modelValue:t(o).offsetActionChineseX,"onUpdate:modelValue":e[8]||(e[8]=s=>t(o).offsetActionChineseX=s),min:-1e3,max:1e3,size:"small"},null,8,["modelValue"])]),r("form",null,[d("中文偏移Y: "),l(u,{modelValue:t(o).offsetActionChineseY,"onUpdate:modelValue":e[9]||(e[9]=s=>t(o).offsetActionChineseY=s),min:-1e3,max:1e3,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[d("倒計時字號(px): "),l(u,{modelValue:t(o).fontSizeCountDown,"onUpdate:modelValue":e[10]||(e[10]=s=>t(o).fontSizeCountDown=s),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",null,[d("中文字號(px): "),l(u,{modelValue:t(o).fontSizeActionName,"onUpdate:modelValue":e[11]||(e[11]=s=>t(o).fontSizeActionName=s),min:1,max:100,size:"small","controls-position":"right"},null,8,["modelValue"])]),r("form",Ie,[d("字型: "),l(m,{modelValue:t(o).fontFamily,"onUpdate:modelValue":e[12]||(e[12]=s=>t(o).fontFamily=s),size:"small",clearable:"",onClear:e[13]||(e[13]=s=>t(o).fontFamily="SmartisanHei")},null,8,["modelValue"])])]),_:1},512),[[q,t(D)]]),R(l(G,{style:g({fontFamily:t(o).fontFamily})},{default:y(()=>{var s,O;return[l(L,null,{default:y(()=>[l(B,{span:24,flex:"","justify-end":""},{default:y(()=>{var T;return[r("div",{style:g({fontSize:t(o).fontSizeCountDown+"px"}),class:"countdown"},N(Math.max(((((T=t(f).targetCast)==null?void 0:T.overTime)??1)-t(V)-t(S))/1e3,0).toFixed(2)),5)]}),_:1})]),_:1}),l(Z,{percentage:Math.min((t(V)-(((s=t(f).targetCast)==null?void 0:s.startTime)??1)+t(S))/(((O=t(f).targetCast)==null?void 0:O.castTime)??1)*100,100),"stroke-width":8,indeterminate:!1,"show-text":!1,color:"#fbfff9",class:"progress"},null,8,["percentage"]),l(L,null,{default:y(()=>[l(B,{span:24,flex:"","justify-end":""},{default:y(()=>{var T;return[r("div",{style:g({fontSize:t(o).fontSizeActionName+"px"}),class:"actionChinese"},N((T=t(f).targetCast)==null?void 0:T.name),5)]}),_:1})]),_:1})]}),_:1},8,["style"]),[[q,t(f).targetCast&&t(V)-t(f).targetCast.overTime+t(S)<t(o).keep]])]),_:1})}}});const Oe=be(Ne,[["__scopeId","data-v-6d83739a"]]);export{Oe as default};
